<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
	<HEAD>
		<META NAME="generator" CONTENT="WebObjects 4.5">
		<TITLE>SiteFile Hacks</TITLE>
	</HEAD>
	<BODY BGCOLOR="#FFFFFF">
		<FONT COLOR=#0000ff><FONT SIZE=4><B>Copy All SiteFiles to a New Location</B></FONT></FONT><BR>Copies all the in use uploaded files for SiteFiles from where they were uploaded to Destination Path. &nbsp;This was done so that unused, uploaded files could be removed from the file system. &nbsp;The intended usage pattern is:<BR>1. Use this function to copy the used files to a temporary location.<BR>2. Delete the entire uploaded files directory.<BR>3. Manually (in the shell) move the copied files from the temporary location back to the original location.<BR><BR><B>Warning</B>: This takes a long time and the browser will time out. The results are sent to the application log (console or WOOutputPath). Or hit the back button and then the refresh link.<WEBOBJECT NAME=CopyFilesForm><BR>Destination Path: <WEBOBJECT NAME=TextField1></WEBOBJECT><BR><BR><WEBOBJECT NAME=Repetition2><FONT COLOR=#ff0000><B><WEBOBJECT NAME=String2></WEBOBJECT></B></FONT><BR></WEBOBJECT><BR><WEBOBJECT NAME=CopyNowSubmitButton></WEBOBJECT><BR><BR></WEBOBJECT><P><WEBOBJECT NAME=RefreshHyperlink>Refresh</WEBOBJECT></P><P></P><HR><P></P><FONT COLOR=#0000ff><FONT SIZE=4><B>Find SiteFiles Without Uploaded Files</B></FONT></FONT><BR>This lists, by Org Unit and Website, SiteFiles whose uploaded file is no longer present. These SiteFiles either need to be manually deleted or replaced.<BR><BR><WEBOBJECT NAME=Hyperlink1>Find Missing Files</WEBOBJECT><P></P><TABLE><TR><TH ALIGN=LEFT>Org Unit</TH><TD>&nbsp;</TD><TH ALIGN=LEFT>Site ID</TH><TD>&nbsp;</TD><TH ALIGN=LEFT>Uploaded File Name</TH></TR><WEBOBJECT NAME=Repetition3><TR><TD ALIGN=LEFT><WEBOBJECT NAME=String1></WEBOBJECT></TD><TD>&nbsp;</TD><TD ALIGN=LEFT><WEBOBJECT NAME=String3></WEBOBJECT></TD><TD>&nbsp;</TD><TD ALIGN=LEFT><WEBOBJECT NAME=String4></WEBOBJECT></TD></TR></WEBOBJECT></TABLE><P></P><HR><P></P><FONT COLOR=#0000ff><FONT SIZE=4><B>Recalculate Quota Usage for All Websites</B></FONT></FONT><BR>This forces each Website to recalcuate the quota used (according to information in the SiteFiles <B>not</B> the actual file system usage!) and updates all the Org Units as well. This should reflect the actual file system usage if the above issues are corrected first.<BR><BR><WEBOBJECT NAME=Hyperlink2>Recalculate Quota Usage</WEBOBJECT><P></P><P ALIGN=CENTER><WEBOBJECT NAME=MainPageHyperlink><B><FONT SIZE=4><FONT COLOR=#01b01e>Back to Main Page</FONT></FONT></B></WEBOBJECT></P>
	</BODY>
</HTML>